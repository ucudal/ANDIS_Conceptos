# 2 Técnicas y herramientas

## 2.13 Integración de aplicaciones

## 2.13.3 RPC o *remote procedure call*

RPC ‑o llamada a procedimiento remoto en español‑ es un estilo de interacción
entre [componentes](/4_Conceptos/4_Componente.md) que se basa en las llamadas a
procedimientos ‑sub-rutinas‑ de los lenguajes imperativos, excepto que el
procedimiento llamado se encuentra en otro componente en un espacio de
direccionamiento diferente ‑en otra parte de la red‑.

El programador codifica la llamada al procedimiento como si se estuviera
llamando a un procedimiento local. La llamada se traduce en un mensaje que se
envía al componente remoto donde se invoca el procedimiento real. Finalmente los
resultados se envían como un mensaje al procedimiento que realizó la llamada.
Este proceso se puede ver de forma esquemática en el [diagrama de
secuencia](/2_Tecnicas_y_herramientas/2_04_.Modelos_de_comportamiento/2_04_03_Diagramas_de_secuencia_UML.md)
de la [Figura 1](#figura-1):

<span id="figura-1"/>

![Diagrama de secuencia de una invocación RPC](/diagrams/RPC.svg)

*Figura 1: Diagrama de secuencia de una invocación RPC*. Basado en [^1].

La secuencia para el llamado al procedimiento remoto es así:

1. El código del lado del cliente realiza una llamada a un procedimiento de la
   forma normal, pero en lugar de invocarse ese procedimiento se invoca un
   *stub* del lado del cliente. Esto se realiza de forma transparente.

2. El *stub* del lado del cliente prepara un mensaje incluyendo los parámetros
   del procedimiento llamado.

3. El *stub* del lado del cliente utiliza funciones del sistema operativo
   local para enviar el mensaje al servidor remoto.

4. El sistema operativo local envía el mensaje al sistema operativo remoto en el
   servidor.

5. El sistema operativo remoto pasa el mensaje recibido a un *stub* del lado del
   servidor.

6. El *stub* del lado del servidor decodifica el mensaje para obtener los
   parámetros del procedimiento llamado.

7. El *stub* del lado del servidor invoca el procedimiento de forma normal
   pasando los parámetros recibidos.

El proceso es exactamente análogo para devolver el resultado.

Los orígenes del concepto de RPC se remontan a los años '80. Existen diferentes
implementaciones del concepto de RPC. DCE/RPC que es un
[estándar](https://publications.opengroup.org/c706) de The Open Group. [Java
RMI](https://docs.oracle.com/javase/8/docs/technotes/guides/rmi/index.html) es
un ejemplo implementación del concepto de RPC para el lenguaje Java.

La implementación más reciente del concepto de RPC es [gRPC](https://grpc.io).
En gRPC los parámetros se transmiten en formato binario, es asíncrono, soporta
autenticación, flujos de datos bi-direccionales, control de flujo, cancelación y
tiempos de espera; usa HTTP 2.0 para transporte.

> [!TIP]
> Vean la sección **4.2 Remote Procedure Call** de [^1] para obtener más
> información sobre RPC.

<!-- cSpell:ignore Tannenbaum -->

[^1]: van Steen, M., Tannenbaum, A. (2025). Distributed Systems: Principles and
    Paradigms, 4<sup>th</sup> edition. Maarten van Steen. Disponible
    [aquí](https://www.distributed-systems.net/index.php/books/ds4/).
